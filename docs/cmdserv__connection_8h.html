<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>cmdserv: cmdserv_connection.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cmdserv
   
   </div>
   <div id="projectbrief">a simple TCP command server</div>
  </td>
  
  
  
   
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('cmdserv__connection_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cmdserv_connection.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The object representing one client connection.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="cmdserv__logger_8h_source.html">cmdserv_logger.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cmdserv__tokenize_8h_source.html">cmdserv_tokenize.h</a>&quot;</code><br/>
</div>
<p><a href="cmdserv__connection_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a743fed7526a104d1eb41a64d9b684c5e">CMDSERV_TOKENIZER_NONE</a>&#160;&#160;&#160;(NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant to disable the built-in tokenizer (lines will be treated as one single token instead of being parsed).  <a href="#a743fed7526a104d1eb41a64d9b684c5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a2477bc854a7f331b0b9c04045f145866">CMDSERV_TOKENIZER_DEFAULT</a>&#160;&#160;&#160;(&amp;<a class="el" href="cmdserv__tokenize_8h.html#a2f02e13f8c5dca66d285cd4eb3f547ab">cmdserv_tokenize</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant to select the built-in shell-like default tokenizer.  <a href="#a2477bc854a7f331b0b9c04045f145866"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acc991fb01df61fdb7663e3f2d443dc31"></a><!-- doxytag: member="cmdserv_connection.h::CMDSERV_ERR_TOO_MANY_ARGS" ref="acc991fb01df61fdb7663e3f2d443dc31" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMDSERV_ERR_TOO_MANY_ARGS</b>&#160;&#160;&#160;(-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a30e32225434e5dac04059a15fb3b955a"></a><!-- doxytag: member="cmdserv_connection.h::CMDSERV_ERR_LINE_TOO_LONG" ref="a30e32225434e5dac04059a15fb3b955a" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMDSERV_ERR_LINE_TOO_LONG</b>&#160;&#160;&#160;(-2)</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#aa06310d8ba8591f210ff9fc1500f6e16">cmdserv_tokenizer</a> )(char *str, char **argv, int argc_max)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for a function pointer to a cmdserv tokenizer.  <a href="#aa06310d8ba8591f210ff9fc1500f6e16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The object representing one active client connection.  <a href="#a78d98a9d57be748fd1a5318726cc623b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">cmdserv_close_reason</a> { <br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7adfc2cbc692f54e38cb637fe93078f11f">CMDSERV_NO_CLOSE</a> =  0, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7a6bb1e48fab6c49175cf01c1610e615d5">CMDSERV_APPLICATION_CLOSE</a> =  1, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7a22c94cad61cec5343876a998c28495b5">CMDSERV_CLIENT_DISCONNECT</a> =  490, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7a9bdfdc04fafbb4ede4f2a65445ac438d">CMDSERV_CLIENT_RECEIVE_ERROR</a> =  491, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7ac24903e7aa8fe8bf3164d9617f75c88f">CMDSERV_CLIENT_TIMEOUT</a> =  492, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7adfa4974595e166af1610d34746e6fb21">CMDSERV_SERVER_SHUTDOWN</a> =  590, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7abe99c8893bab588bf8e2a6f4b3503dd2">CMDSERV_SERVER_TOO_MANY_CONNECTIONS</a> =  591
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reasons on why a connection was closed.  <a href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a5e9c831596ba319a88d3bbc5e4f3e111">cmdserv_lineterm</a> { <br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a5e9c831596ba319a88d3bbc5e4f3e111a43ab425ae6535468abd1af4ea4ff876e">CMDSERV_LINETERM_LF</a>, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a5e9c831596ba319a88d3bbc5e4f3e111a551d2a05d7531817b030d8842b9d74e0">CMDSERV_LINETERM_CRLF_OR_LF</a>, 
<br/>
&#160;&#160;<a class="el" href="cmdserv__connection_8h.html#a5e9c831596ba319a88d3bbc5e4f3e111a8b17ba2f85cbe2dbacb30b5d5e675639">CMDSERV_LINETERM_CRLF</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure end-of-line character modes.  <a href="cmdserv__connection_8h.html#a5e9c831596ba319a88d3bbc5e4f3e111">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#ae9c02679d0b919bc03e19d877a854957">cmdserv_string_treatment</a> { <a class="el" href="cmdserv__connection_8h.html#ae9c02679d0b919bc03e19d877a854957ae84d2f2c8e573ecb87d31832c70ae939">CMDSERV_LOG_SAFE</a> =  1
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">For future expansion.  <a href="cmdserv__connection_8h.html#ae9c02679d0b919bc03e19d877a854957">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#ac6dfa98ac9163a75635f1c428a466f71">cmdserv_connection_create</a> (int listener_fd, unsigned long long int conn_id, struct <a class="el" href="structcmdserv__connection__config.html">cmdserv_connection_config</a> *config, enum <a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">cmdserv_close_reason</a> close_reason)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept a new client connection from a listener.  <a href="#ac6dfa98ac9163a75635f1c428a466f71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a65247df4e5f4390c004908e02bd4eb75">cmdserv_connection_close</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, enum <a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">cmdserv_close_reason</a> reason)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a client connection.  <a href="#a65247df4e5f4390c004908e02bd4eb75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a0383a7481820126aea6e166fe3406fac">cmdserv_connection_log</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, enum <a class="el" href="cmdserv__logger_8h.html#a6515eeba74338af0b62ec85bc49420cd">cmdserv_logseverity</a> severity, const char *fmt,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a connection-related event.  <a href="#a0383a7481820126aea6e166fe3406fac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#aa8c340886edc3b43de44d8de9f6cea05">cmdserv_connection_vlog</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, enum <a class="el" href="cmdserv__logger_8h.html#a6515eeba74338af0b62ec85bc49420cd">cmdserv_logseverity</a> severity, const char *fmt, va_list ap)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a connection-related event, va_list version.  <a href="#aa8c340886edc3b43de44d8de9f6cea05"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a3d7df4c5220e37daf18aaebef9eb4b5b">cmdserv_connection_command_string</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, enum <a class="el" href="cmdserv__connection_8h.html#ae9c02679d0b919bc03e19d877a854957">cmdserv_string_treatment</a> trtmt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string representation of the parsed, currently handled command.  <a href="#a3d7df4c5220e37daf18aaebef9eb4b5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#aa47e3c8771b41cff2ed80349e4dbd8d5">cmdserv_connection_send_status</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, int status, const char *fmt,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a status line on this connection.  <a href="#aa47e3c8771b41cff2ed80349e4dbd8d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a8fbdea0eef7928aef49db44cdcbff661">cmdserv_connection_send</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, const void *buf, size_t nbyte, int flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send nbyte bytes from the buffer pointed to by buf.  <a href="#a8fbdea0eef7928aef49db44cdcbff661"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a3b7525a2947c06ab6faa64efaeb58d7d">cmdserv_connection_print</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, const char *str)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a zero-terminated string over the connection.  <a href="#a3b7525a2947c06ab6faa64efaeb58d7d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#ac64a6bdf6815a94f9b50a823c56127f7">cmdserv_connection_println</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, const char *str)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a zero-terminated string followed by a line break.  <a href="#ac64a6bdf6815a94f9b50a823c56127f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a1f00764e0dfb0e7626c77c1501032729">cmdserv_connection_printf</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, const char *fmt,...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a formatted string to the connection.  <a href="#a1f00764e0dfb0e7626c77c1501032729"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#aaf85409c7e3edbbddab744cc3f1c8a9c">cmdserv_connection_vprintf</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, const char *fmt, va_list ap)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a formatted string to the connection.  <a href="#aaf85409c7e3edbbddab744cc3f1c8a9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a3c6a0d3164734e43d8bc2695ff3c153c">cmdserv_connection_fd</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the file descriptor for this connection.  <a href="#a3c6a0d3164734e43d8bc2695ff3c153c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a97434314f9f250fab3bbd4b0c1885169">cmdserv_connection_id</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the connection ID for this connection.  <a href="#a97434314f9f250fab3bbd4b0c1885169"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a79fcb834ff67ca587632c885af01bef2">cmdserv_connection_time_idle</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve idle time for this connection.  <a href="#a79fcb834ff67ca587632c885af01bef2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a83db5b187512d8b18a1494a63575a21a">cmdserv_connection_client_timeout</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the currently configured client inactivity timeout for this connection.  <a href="#a83db5b187512d8b18a1494a63575a21a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a38091d3c8532cb9d26c8c6a2c299a8d6">cmdserv_connection_set_client_timeout</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, time_t timeout)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the client inactivity timeout for this connection.  <a href="#a38091d3c8532cb9d26c8c6a2c299a8d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a8678c580db87e6b6200f46a0cae7e19d">cmdserv_connection_time_connected</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve connection time.  <a href="#a8678c580db87e6b6200f46a0cae7e19d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cmdserv__connection_8h.html#aa06310d8ba8591f210ff9fc1500f6e16">cmdserv_tokenizer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a836295d33e4c5d6b536e98877bccea6b">cmdserv_connection_tokenizer</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection, <a class="el" href="cmdserv__connection_8h.html#aa06310d8ba8591f210ff9fc1500f6e16">cmdserv_tokenizer</a> tokenizer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a new tokenizer to be used with this connection (and retrieve the current one).  <a href="#a836295d33e4c5d6b536e98877bccea6b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a7c7f61fed648741ccfb7fbeb19031a9a">cmdserv_connection_client</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve human-readable client information for this connection.  <a href="#a7c7f61fed648741ccfb7fbeb19031a9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmdserv__connection_8h.html#a8f2a936527480c92d24ee8ffc1a03058">cmdserv_connection_read</a> (<a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *connection)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger a read on the connection.  <a href="#a8f2a936527480c92d24ee8ffc1a03058"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The object representing one client connection. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Beat Vontobel &lt;<a href="mailto:b.vontobel@meteonews.ch">b.vontobel@meteonews.ch</a>&gt; </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>0.9.0 </dd></dl>
<dl class="copyright"><dt><b>Copyright:</b></dt><dd>2014, MeteoNews AG, Beat Vontobel</dd></dl>
<h2><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h2>
<p>XXX</p>
<h2><a class="anchor" id="LICENSE"></a>
LICENSE</h2>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv_8h.html" title="The main cmdserv server object, the only thing you need to include.">cmdserv.h</a> <a class="el" href="cmdserv__logger_8h.html" title="Common logging functionality for both cmdserv and cmdserv_connection.">cmdserv_logger.h</a></dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd></dd></dl>
<p>Implement a callback for built-in errors (currently "Too many
     arguments", and "Command too long", both using status code 400, see use of <a class="el" href="cmdserv__connection_8h.html#aa47e3c8771b41cff2ed80349e4dbd8d5" title="Send a status line on this connection.">cmdserv_connection_send_status()</a> within cmdserv_connection.c), so users can use different error messages and status codes, or maybe completely different reactions to these errors (such as closing the connection). </p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a743fed7526a104d1eb41a64d9b684c5e"></a><!-- doxytag: member="cmdserv_connection.h::CMDSERV_TOKENIZER_NONE" ref="a743fed7526a104d1eb41a64d9b684c5e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="cmdserv__connection_8h.html#a743fed7526a104d1eb41a64d9b684c5e">CMDSERV_TOKENIZER_NONE</a>&#160;&#160;&#160;(NULL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constant to disable the built-in tokenizer (lines will be treated as one single token instead of being parsed). </p>

</div>
</div>
<a class="anchor" id="a2477bc854a7f331b0b9c04045f145866"></a><!-- doxytag: member="cmdserv_connection.h::CMDSERV_TOKENIZER_DEFAULT" ref="a2477bc854a7f331b0b9c04045f145866" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="cmdserv__connection_8h.html#a2477bc854a7f331b0b9c04045f145866">CMDSERV_TOKENIZER_DEFAULT</a>&#160;&#160;&#160;(&amp;<a class="el" href="cmdserv__tokenize_8h.html#a2f02e13f8c5dca66d285cd4eb3f547ab">cmdserv_tokenize</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constant to select the built-in shell-like default tokenizer. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__tokenize_8h.html#a2f02e13f8c5dca66d285cd4eb3f547ab" title="Parses a string into tokens, splitting at whitespace and handling escapes and quotes, in similar ways as a shell usually does, but without all the magic things like expansion, globbing and more.">cmdserv_tokenize()</a> </dd></dl>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="aa06310d8ba8591f210ff9fc1500f6e16"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_tokenizer" ref="aa06310d8ba8591f210ff9fc1500f6e16" args=")(char *str, char **argv, int argc_max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="cmdserv__connection_8h.html#aa06310d8ba8591f210ff9fc1500f6e16">cmdserv_tokenizer</a>)(char *str, char **argv, int argc_max)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type for a function pointer to a cmdserv tokenizer. </p>

</div>
</div>
<a class="anchor" id="a78d98a9d57be748fd1a5318726cc623b"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection" ref="a78d98a9d57be748fd1a5318726cc623b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> <a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The object representing one active client connection. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a0fe0409bc140837278d6d5325af792c7"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_close_reason" ref="a0fe0409bc140837278d6d5325af792c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">cmdserv_close_reason</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reasons on why a connection was closed. </p>
<p>These values are communicated to the open_handler and close_handler registered by the application, so it can take special action (if required by the communications protocol implemented) for some "abnormal" reasons for a connection close.</p>
<p>The library reserves the values 0, 1, 49x (490 to 499), and 59x (590 to 599) for special use. Other values, though not part of the enum, but compatible with it (users should stick to positive int values), can theoretically be used by the application in calls to <a class="el" href="cmdserv__connection_8h.html#a65247df4e5f4390c004908e02bd4eb75" title="Close a client connection.">cmdserv_connection_close()</a>, if it wishes to communicate different specific reasons for a close.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a65247df4e5f4390c004908e02bd4eb75" title="Close a client connection.">cmdserv_connection_close()</a> </dd></dl>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7adfc2cbc692f54e38cb637fe93078f11f"></a><!-- doxytag: member="CMDSERV_NO_CLOSE" ref="a0fe0409bc140837278d6d5325af792c7adfc2cbc692f54e38cb637fe93078f11f" args="" -->CMDSERV_NO_CLOSE</em>&nbsp;</td><td>
<p>connection still active </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7a6bb1e48fab6c49175cf01c1610e615d5"></a><!-- doxytag: member="CMDSERV_APPLICATION_CLOSE" ref="a0fe0409bc140837278d6d5325af792c7a6bb1e48fab6c49175cf01c1610e615d5" args="" -->CMDSERV_APPLICATION_CLOSE</em>&nbsp;</td><td>
<p>app initiated close </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7a22c94cad61cec5343876a998c28495b5"></a><!-- doxytag: member="CMDSERV_CLIENT_DISCONNECT" ref="a0fe0409bc140837278d6d5325af792c7a22c94cad61cec5343876a998c28495b5" args="" -->CMDSERV_CLIENT_DISCONNECT</em>&nbsp;</td><td>
<p>client closed connection </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7a9bdfdc04fafbb4ede4f2a65445ac438d"></a><!-- doxytag: member="CMDSERV_CLIENT_RECEIVE_ERROR" ref="a0fe0409bc140837278d6d5325af792c7a9bdfdc04fafbb4ede4f2a65445ac438d" args="" -->CMDSERV_CLIENT_RECEIVE_ERROR</em>&nbsp;</td><td>
<p>error from recv() </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7ac24903e7aa8fe8bf3164d9617f75c88f"></a><!-- doxytag: member="CMDSERV_CLIENT_TIMEOUT" ref="a0fe0409bc140837278d6d5325af792c7ac24903e7aa8fe8bf3164d9617f75c88f" args="" -->CMDSERV_CLIENT_TIMEOUT</em>&nbsp;</td><td>
<p>client inactivity </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7adfa4974595e166af1610d34746e6fb21"></a><!-- doxytag: member="CMDSERV_SERVER_SHUTDOWN" ref="a0fe0409bc140837278d6d5325af792c7adfa4974595e166af1610d34746e6fb21" args="" -->CMDSERV_SERVER_SHUTDOWN</em>&nbsp;</td><td>
<p><a class="el" href="cmdserv_8h.html#a23094d07b57ed758bed3bff9d7877546" title="Shutdown server and free resources.">cmdserv_shutdown()</a> called </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0fe0409bc140837278d6d5325af792c7abe99c8893bab588bf8e2a6f4b3503dd2"></a><!-- doxytag: member="CMDSERV_SERVER_TOO_MANY_CONNECTIONS" ref="a0fe0409bc140837278d6d5325af792c7abe99c8893bab588bf8e2a6f4b3503dd2" args="" -->CMDSERV_SERVER_TOO_MANY_CONNECTIONS</em>&nbsp;</td><td>
<p>connections_max reached </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="a5e9c831596ba319a88d3bbc5e4f3e111"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_lineterm" ref="a5e9c831596ba319a88d3bbc5e4f3e111" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cmdserv__connection_8h.html#a5e9c831596ba319a88d3bbc5e4f3e111">cmdserv_lineterm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure end-of-line character modes. </p>
<p>This affects parsing of input, but also the end-of-line characters by methods such as <a class="el" href="cmdserv__connection_8h.html#ac64a6bdf6815a94f9b50a823c56127f7" title="Write a zero-terminated string followed by a line break.">cmdserv_connection_println()</a> or <a class="el" href="cmdserv__connection_8h.html#aa47e3c8771b41cff2ed80349e4dbd8d5" title="Send a status line on this connection.">cmdserv_connection_send_status()</a>.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd></dd></dl>
<p>Further modes could be added if needed: CMDSERV_LINETERM_CR for lone CRs (used e.g. on Macs before OS X), and strict modes CMDSERV_LINETERM_LF_STRICT, CMDSERV_LINETERM_CRLF_STRICT, and CMDSERV_LINETERM_CR_STRICT. The strict modes would regard any CR or LF character that's not part of a legal line termination (and probably also other similar whitespace such as TAB, VTAB, FF... and maybe all non-printable characters) as a protocol violation and reject the complete line. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a5e9c831596ba319a88d3bbc5e4f3e111a43ab425ae6535468abd1af4ea4ff876e"></a><!-- doxytag: member="CMDSERV_LINETERM_LF" ref="a5e9c831596ba319a88d3bbc5e4f3e111a43ab425ae6535468abd1af4ea4ff876e" args="" -->CMDSERV_LINETERM_LF</em>&nbsp;</td><td>
<p>Lines are LF terminated. </p>
<p>In this mode only LF characters are regarded as special and treated as end-of-line characters. CRs (be it lone or in a CR-LF-sequence) will be completely ignored by the end-of-line detection and treated as any other non-special character would.</p>
<p>Thus a line terminated by a CR-LF-sequence will end in a lone CR after stripping of the LF. The default command tokenizer will treat the CR as arbitrary white space at the end of the line and silently strip it on tokenization in most cases (thus this mode is quite similar to CMDSERV_LINETERM_LF_OR_CRLF in these cases), in raw line mode though, the handler will get to see the CR (and is thus able to detect if a line was ended by LF or by CRLF). </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5e9c831596ba319a88d3bbc5e4f3e111a551d2a05d7531817b030d8842b9d74e0"></a><!-- doxytag: member="CMDSERV_LINETERM_CRLF_OR_LF" ref="a5e9c831596ba319a88d3bbc5e4f3e111a551d2a05d7531817b030d8842b9d74e0" args="" -->CMDSERV_LINETERM_CRLF_OR_LF</em>&nbsp;</td><td>
<p>Lines are terminated by LF or CRLF on input, by CRLF on output. </p>
<p>In this mode the line parser will accept a lone LF as line termination as well as a CR-LF-sequence. Both will be cut off. The information on what terminated the line will be lost even for raw line mode.</p>
<p>For sending, all methods that append an end-of-line marker automatically will use CRLF in this mode. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5e9c831596ba319a88d3bbc5e4f3e111a8b17ba2f85cbe2dbacb30b5d5e675639"></a><!-- doxytag: member="CMDSERV_LINETERM_CRLF" ref="a5e9c831596ba319a88d3bbc5e4f3e111a8b17ba2f85cbe2dbacb30b5d5e675639" args="" -->CMDSERV_LINETERM_CRLF</em>&nbsp;</td><td>
<p>Lines are terminated by CRLF. </p>
<p>Only a sequence of a CR character directly followed by an LF character will be treated as the end of a line. All other CR or LF characters appearing in the stream will be completely ignored by the end-of-line detection and handed through to the command tokenizer or directly to the handler (in raw line mode) unchanged. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="ae9c02679d0b919bc03e19d877a854957"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_string_treatment" ref="ae9c02679d0b919bc03e19d877a854957" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cmdserv__connection_8h.html#ae9c02679d0b919bc03e19d877a854957">cmdserv_string_treatment</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For future expansion. </p>
<p>Currently only one possible treatment is defined.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a3d7df4c5220e37daf18aaebef9eb4b5b" title="Returns a string representation of the parsed, currently handled command.">cmdserv_connection_command_string()</a> </dd></dl>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae9c02679d0b919bc03e19d877a854957ae84d2f2c8e573ecb87d31832c70ae939"></a><!-- doxytag: member="CMDSERV_LOG_SAFE" ref="ae9c02679d0b919bc03e19d877a854957ae84d2f2c8e573ecb87d31832c70ae939" args="" -->CMDSERV_LOG_SAFE</em>&nbsp;</td><td>
<p>Escape everything outside printable US-ASCII. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac6dfa98ac9163a75635f1c428a466f71"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_create" ref="ac6dfa98ac9163a75635f1c428a466f71" args="(int listener_fd, unsigned long long int conn_id, struct cmdserv_connection_config *config, enum cmdserv_close_reason close_reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a>* <a class="el" href="cmdserv__connection_8h.html#ac6dfa98ac9163a75635f1c428a466f71">cmdserv_connection_create</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>listener_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long int&#160;</td>
          <td class="paramname"><em>conn_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcmdserv__connection__config.html">cmdserv_connection_config</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">cmdserv_close_reason</a>&#160;</td>
          <td class="paramname"><em>close_reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accept a new client connection from a listener. </p>
<p>This is the constructor for cmdserv connection objects. Normal users of the library should never have to use it, as the cmdserv main server object takes care of this. It can be used however to wrap a different main server around just the connection object.</p>
<p>Will return NULL on any failure with errno set by an underlying library.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">listener_fd</td><td>The file descriptor of the listener socket with the pending client connection to be accepted.</td></tr>
    <tr><td class="paramname">conn_id</td><td>A unique connection ID to identify this connection. It will be used in logging output and in the close_handler callback to inform the user of this method again when this connection has been closed.</td></tr>
    <tr><td class="paramname">config</td><td>A <a class="el" href="structcmdserv__connection__config.html" title="Start-up configuration for a cmdserv_connection.">cmdserv_connection_config</a> object defining the connection parameters, including the callbacks.</td></tr>
    <tr><td class="paramname">close_reason</td><td>Set this to a specific reason (the library guarantess to only ever use CMDSERV_SERVER_TOO_MANY_CONNECTIONS) if it is already known that this connection will be immediately closed again. Will usually be 0 (CMDSERV_NO_CLOSE) for ordinary connections.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The newly created client connection or NULL on failure.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structcmdserv__connection__config.html" title="Start-up configuration for a cmdserv_connection.">cmdserv_connection_config</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a65247df4e5f4390c004908e02bd4eb75"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_close" ref="a65247df4e5f4390c004908e02bd4eb75" args="(cmdserv_connection *connection, enum cmdserv_close_reason reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cmdserv__connection_8h.html#a65247df4e5f4390c004908e02bd4eb75">cmdserv_connection_close</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7">cmdserv_close_reason</a>&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close a client connection. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The connection to be closed.</td></tr>
    <tr><td class="paramname">reason</td><td>Why the connection was closed. This will be communicated to the close_handler to take appropriate action if needed. The library guarantees to only use values defined in the enum cmdserv_close_reason if it needs to call the close_handler on its own.</td></tr>
  </table>
  </dd>
</dl>
<p>Applications should set this to CMDSERV_APPLICATION_CLOSE (1), if they do not require to communicate any special reason. The value CMDSERV_NO_CLOSE (0) will never be passed on to the close_handler but translated to CMDSERV_APPLICATION_CLOSE (1) first by the library. So if this feature is not used by the application, any of 0 or 1 can be used.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>enum <a class="el" href="cmdserv__connection_8h.html#a0fe0409bc140837278d6d5325af792c7" title="Reasons on why a connection was closed.">cmdserv_close_reason</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a0383a7481820126aea6e166fe3406fac"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_log" ref="a0383a7481820126aea6e166fe3406fac" args="(cmdserv_connection *connection, enum cmdserv_logseverity severity, const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cmdserv__connection_8h.html#a0383a7481820126aea6e166fe3406fac">cmdserv_connection_log</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="cmdserv__logger_8h.html#a6515eeba74338af0b62ec85bc49420cd">cmdserv_logseverity</a>&#160;</td>
          <td class="paramname"><em>severity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Log a connection-related event. </p>
<p>This logging method is analogous to <a class="el" href="cmdserv_8h.html#a4a7fa7e87adfb66c7ba23bec3387576c" title="Log a server-related event.">cmdserv_log()</a> but should be used instead of it for events regarding a specific client connection (as opposed to server-wide events). The logged message will automatically be enriched with information identifying the connection in question.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#aa8c340886edc3b43de44d8de9f6cea05" title="Log a connection-related event, va_list version.">cmdserv_connection_vlog()</a> <a class="el" href="cmdserv__logger_8h.html#a6515eeba74338af0b62ec85bc49420cd" title="The severity levels for the logging methods.">cmdserv_logseverity</a> <a class="el" href="cmdserv_8h.html#a4a7fa7e87adfb66c7ba23bec3387576c" title="Log a server-related event.">cmdserv_log()</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to which the logged event applies. Connection information will automatically be added to the head of the logged message.</td></tr>
    <tr><td class="paramname">severity</td><td>The severity level for the logged event.</td></tr>
    <tr><td class="paramname">fmt</td><td>The following arguments are the human readable message in sprintf() format. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa8c340886edc3b43de44d8de9f6cea05"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_vlog" ref="aa8c340886edc3b43de44d8de9f6cea05" args="(cmdserv_connection *connection, enum cmdserv_logseverity severity, const char *fmt, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cmdserv__connection_8h.html#aa8c340886edc3b43de44d8de9f6cea05">cmdserv_connection_vlog</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="cmdserv__logger_8h.html#a6515eeba74338af0b62ec85bc49420cd">cmdserv_logseverity</a>&#160;</td>
          <td class="paramname"><em>severity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Log a connection-related event, va_list version. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a0383a7481820126aea6e166fe3406fac" title="Log a connection-related event.">cmdserv_connection_log()</a> <a class="el" href="cmdserv__logger_8h.html#a6515eeba74338af0b62ec85bc49420cd" title="The severity levels for the logging methods.">cmdserv_logseverity</a> <a class="el" href="cmdserv_8h.html#a4a7fa7e87adfb66c7ba23bec3387576c" title="Log a server-related event.">cmdserv_log()</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to which the logged event applies. Connection information will automatically be added to the head of the logged message.</td></tr>
    <tr><td class="paramname">severity</td><td>The severity level for the logged event.</td></tr>
    <tr><td class="paramname">fmt</td><td>Message format in sprintf() format.</td></tr>
    <tr><td class="paramname">ap</td><td>Arguments to format. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3d7df4c5220e37daf18aaebef9eb4b5b"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_command_string" ref="a3d7df4c5220e37daf18aaebef9eb4b5b" args="(cmdserv_connection *connection, enum cmdserv_string_treatment trtmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="cmdserv__connection_8h.html#a3d7df4c5220e37daf18aaebef9eb4b5b">cmdserv_connection_command_string</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="cmdserv__connection_8h.html#ae9c02679d0b919bc03e19d877a854957">cmdserv_string_treatment</a>&#160;</td>
          <td class="paramname"><em>trtmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a string representation of the parsed, currently handled command. </p>
<p>The zero-terminated string is suitable for logging. It might be truncated to below 512 characters. Non-printable characters are replaced by escape sequences.</p>
<p>The method is not re-entrant. It's also only valid to call it from within a command handler.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object through which the status line should be sent.</td></tr>
    <tr><td class="paramname">trtmt</td><td>Processing done on the string. Currently ignored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero-terminated string, statically allocated. </dd></dl>

</div>
</div>
<a class="anchor" id="aa47e3c8771b41cff2ed80349e4dbd8d5"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_send_status" ref="aa47e3c8771b41cff2ed80349e4dbd8d5" args="(cmdserv_connection *connection, int status, const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="cmdserv__connection_8h.html#aa47e3c8771b41cff2ed80349e4dbd8d5">cmdserv_connection_send_status</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a status line on this connection. </p>
<p>Status lines are of the format "nnn Message\r\n" where "nnn" is a three-digit numerical code and "Message" is a short human-readable description for the numerical code.</p>
<p>This method takes the numerical code separately from the rest of the message (which can be formatted with built-in sprintf() functionality), appends the CR-LF-sequence automatically, and sends the status line down the given connection to the client.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object through which the status line should be sent.</td></tr>
    <tr><td class="paramname">status</td><td>A three-digit integer status value between 100 and 999. The definition of status codes is up to the user of this library, but often status codes as used for many Internet protocols with 2xx being success codes, 4xx being client-error codes, and 5xx being server-error codes are a good starting point.</td></tr>
    <tr><td class="paramname">fmt</td><td>Further arguments are the human-readable part of the status line in sprintf() format. The correct line terminator is automatically appended depending on the current setting from enum cmdserv_lineterm and should not be added to the string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of octets actually sent or -1 for errors. </dd></dl>

</div>
</div>
<a class="anchor" id="a8fbdea0eef7928aef49db44cdcbff661"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_send" ref="a8fbdea0eef7928aef49db44cdcbff661" args="(cmdserv_connection *connection, const void *buf, size_t nbyte, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="cmdserv__connection_8h.html#a8fbdea0eef7928aef49db44cdcbff661">cmdserv_connection_send</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nbyte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send nbyte bytes from the buffer pointed to by buf. </p>
<p>This method behaves excactly like your system's send() call, with the only exception being the first argument: A cmdserv connection object instead of a file descriptor. Refer to your system's send() documentation for further details and semantics.</p>
<p>The library itself uses this method as the low-level operation for all output to client connections.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to send on.</td></tr>
    <tr><td class="paramname">buf</td><td>Pointer to the data buffer from which to write.</td></tr>
    <tr><td class="paramname">nbyte</td><td>Number of bytes to write.</td></tr>
    <tr><td class="paramname">flags</td><td>Flags handed over to send(). Pass in MSG_NOSIGNAL unless you have installed a signal handler for SIGPIPE.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of octets actually sent or -1 for errors. </dd></dl>

</div>
</div>
<a class="anchor" id="a3b7525a2947c06ab6faa64efaeb58d7d"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_print" ref="a3b7525a2947c06ab6faa64efaeb58d7d" args="(cmdserv_connection *connection, const char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="cmdserv__connection_8h.html#a3b7525a2947c06ab6faa64efaeb58d7d">cmdserv_connection_print</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a zero-terminated string over the connection. </p>
<p>The string will be written without the terminating zero and without a line break. This is just a tiny convenience wrapper around <a class="el" href="cmdserv__connection_8h.html#a8fbdea0eef7928aef49db44cdcbff661" title="Send nbyte bytes from the buffer pointed to by buf.">cmdserv_connection_send()</a>, determining the size of the string using strlen() and calling <a class="el" href="cmdserv__connection_8h.html#a8fbdea0eef7928aef49db44cdcbff661" title="Send nbyte bytes from the buffer pointed to by buf.">cmdserv_connection_send()</a> with it. There's no further overhad associated with this call, as for all the other printf()-like methods.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#ac64a6bdf6815a94f9b50a823c56127f7" title="Write a zero-terminated string followed by a line break.">cmdserv_connection_println()</a> <a class="el" href="cmdserv__connection_8h.html#a1f00764e0dfb0e7626c77c1501032729" title="Write a formatted string to the connection.">cmdserv_connection_printf()</a> <a class="el" href="cmdserv__connection_8h.html#a8fbdea0eef7928aef49db44cdcbff661" title="Send nbyte bytes from the buffer pointed to by buf.">cmdserv_connection_send()</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to write on.</td></tr>
    <tr><td class="paramname">str</td><td>A zero-terminated string to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of octets actually sent or -1 for errors. </dd></dl>

</div>
</div>
<a class="anchor" id="ac64a6bdf6815a94f9b50a823c56127f7"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_println" ref="ac64a6bdf6815a94f9b50a823c56127f7" args="(cmdserv_connection *connection, const char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="cmdserv__connection_8h.html#ac64a6bdf6815a94f9b50a823c56127f7">cmdserv_connection_println</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a zero-terminated string followed by a line break. </p>
<p>The correct line terminator is automatically appended depending on the current setting from enum cmdserv_lineterm.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a3b7525a2947c06ab6faa64efaeb58d7d" title="Send a zero-terminated string over the connection.">cmdserv_connection_print()</a> <a class="el" href="cmdserv__connection_8h.html#a1f00764e0dfb0e7626c77c1501032729" title="Write a formatted string to the connection.">cmdserv_connection_printf()</a> <a class="el" href="cmdserv__connection_8h.html#aaf85409c7e3edbbddab744cc3f1c8a9c" title="Write a formatted string to the connection.">cmdserv_connection_vprintf()</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to write on.</td></tr>
    <tr><td class="paramname">str</td><td>A zero-terminated string to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of octets actually sent or -1 for errors. </dd></dl>

</div>
</div>
<a class="anchor" id="a1f00764e0dfb0e7626c77c1501032729"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_printf" ref="a1f00764e0dfb0e7626c77c1501032729" args="(cmdserv_connection *connection, const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="cmdserv__connection_8h.html#a1f00764e0dfb0e7626c77c1501032729">cmdserv_connection_printf</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a formatted string to the connection. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a3b7525a2947c06ab6faa64efaeb58d7d" title="Send a zero-terminated string over the connection.">cmdserv_connection_print()</a> <a class="el" href="cmdserv__connection_8h.html#ac64a6bdf6815a94f9b50a823c56127f7" title="Write a zero-terminated string followed by a line break.">cmdserv_connection_println()</a> <a class="el" href="cmdserv__connection_8h.html#aaf85409c7e3edbbddab744cc3f1c8a9c" title="Write a formatted string to the connection.">cmdserv_connection_vprintf()</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to write on.</td></tr>
    <tr><td class="paramname">fmt</td><td>The following arguments are exactly as for your systems printf().</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of octets actually sent or -1 for errors. </dd></dl>

</div>
</div>
<a class="anchor" id="aaf85409c7e3edbbddab744cc3f1c8a9c"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_vprintf" ref="aaf85409c7e3edbbddab744cc3f1c8a9c" args="(cmdserv_connection *connection, const char *fmt, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t <a class="el" href="cmdserv__connection_8h.html#aaf85409c7e3edbbddab744cc3f1c8a9c">cmdserv_connection_vprintf</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a formatted string to the connection. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a3b7525a2947c06ab6faa64efaeb58d7d" title="Send a zero-terminated string over the connection.">cmdserv_connection_print()</a> <a class="el" href="cmdserv__connection_8h.html#ac64a6bdf6815a94f9b50a823c56127f7" title="Write a zero-terminated string followed by a line break.">cmdserv_connection_println()</a> <a class="el" href="cmdserv__connection_8h.html#a1f00764e0dfb0e7626c77c1501032729" title="Write a formatted string to the connection.">cmdserv_connection_printf()</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to write on.</td></tr>
    <tr><td class="paramname">fmt</td><td>The format. As for your system's vprintf().</td></tr>
    <tr><td class="paramname">ap</td><td>Argument list. As for your system's vprintf().</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of octets actually sent or -1 for errors. </dd></dl>

</div>
</div>
<a class="anchor" id="a3c6a0d3164734e43d8bc2695ff3c153c"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_fd" ref="a3c6a0d3164734e43d8bc2695ff3c153c" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cmdserv__connection_8h.html#a3c6a0d3164734e43d8bc2695ff3c153c">cmdserv_connection_fd</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the file descriptor for this connection. </p>
<p>External users of the library should probably prefer the intended methods to communicate with the other end of a connection, especially for reading, as you might mess up the internal parser state otherwise. In some circumstances it might be helpful to have access to the raw file descriptor though for writing (to e.g. hand it over to somebody else), even if a wrapper in between would probably be the cleaner solution.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the socket file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A socket file descriptor. </dd></dl>

</div>
</div>
<a class="anchor" id="a97434314f9f250fab3bbd4b0c1885169"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_id" ref="a97434314f9f250fab3bbd4b0c1885169" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long int <a class="el" href="cmdserv__connection_8h.html#a97434314f9f250fab3bbd4b0c1885169">cmdserv_connection_id</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the connection ID for this connection. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the connection ID.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The unique (per server) connection ID. </dd></dl>

</div>
</div>
<a class="anchor" id="a79fcb834ff67ca587632c885af01bef2"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_time_idle" ref="a79fcb834ff67ca587632c885af01bef2" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="cmdserv__connection_8h.html#a79fcb834ff67ca587632c885af01bef2">cmdserv_connection_time_idle</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve idle time for this connection. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the idle time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Seconds since last client activity. </dd></dl>

</div>
</div>
<a class="anchor" id="a83db5b187512d8b18a1494a63575a21a"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_client_timeout" ref="a83db5b187512d8b18a1494a63575a21a" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="cmdserv__connection_8h.html#a83db5b187512d8b18a1494a63575a21a">cmdserv_connection_client_timeout</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the currently configured client inactivity timeout for this connection. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the client timeout configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Seconds after which the client will be disconnected without activity. </dd></dl>

</div>
</div>
<a class="anchor" id="a38091d3c8532cb9d26c8c6a2c299a8d6"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_set_client_timeout" ref="a38091d3c8532cb9d26c8c6a2c299a8d6" args="(cmdserv_connection *connection, time_t timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cmdserv__connection_8h.html#a38091d3c8532cb9d26c8c6a2c299a8d6">cmdserv_connection_set_client_timeout</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the client inactivity timeout for this connection. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the client timeout configuration.</td></tr>
    <tr><td class="paramname">timeout</td><td>Seconds after which the client will be disconnected without activity. A value of 0 disables the timeout. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8678c580db87e6b6200f46a0cae7e19d"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_time_connected" ref="a8678c580db87e6b6200f46a0cae7e19d" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="cmdserv__connection_8h.html#a8678c580db87e6b6200f46a0cae7e19d">cmdserv_connection_time_connected</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve connection time. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the connection time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Seconds since this connection was started. </dd></dl>

</div>
</div>
<a class="anchor" id="a836295d33e4c5d6b536e98877bccea6b"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_tokenizer" ref="a836295d33e4c5d6b536e98877bccea6b" args="(cmdserv_connection *connection, cmdserv_tokenizer tokenizer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cmdserv__connection_8h.html#aa06310d8ba8591f210ff9fc1500f6e16">cmdserv_tokenizer</a> <a class="el" href="cmdserv__connection_8h.html#a836295d33e4c5d6b536e98877bccea6b">cmdserv_connection_tokenizer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#aa06310d8ba8591f210ff9fc1500f6e16">cmdserv_tokenizer</a>&#160;</td>
          <td class="paramname"><em>tokenizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set a new tokenizer to be used with this connection (and retrieve the current one). </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv__connection_8h.html#a743fed7526a104d1eb41a64d9b684c5e" title="Constant to disable the built-in tokenizer (lines will be treated as one single token instead of bein...">CMDSERV_TOKENIZER_NONE</a> <a class="el" href="cmdserv__connection_8h.html#a2477bc854a7f331b0b9c04045f145866" title="Constant to select the built-in shell-like default tokenizer.">CMDSERV_TOKENIZER_DEFAULT</a> <a class="el" href="structcmdserv__connection__config.html#a29df61334421d144fd4f5982a64991d8" title="The tokenizer used to parse command lines.">cmdserv_connection_config::tokenizer</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to set a new tokenizer.</td></tr>
    <tr><td class="paramname">tokenizer</td><td>Function pointer to the new tokenizer to be used with this connection.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A function pointer to the previous tokenizer. </dd></dl>

</div>
</div>
<a class="anchor" id="a7c7f61fed648741ccfb7fbeb19031a9a"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_client" ref="a7c7f61fed648741ccfb7fbeb19031a9a" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="cmdserv__connection_8h.html#a7c7f61fed648741ccfb7fbeb19031a9a">cmdserv_connection_client</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve human-readable client information for this connection. </p>
<p>Returns the client address (IP and/or hostname plus port) of the given connection as a human readable string for logging, debugging, error messages, and the like. No assumption about the format should be made (do not parse this information).</p>
<p>The storage for the string pointed to by the return value is allocated dynamically by this method. You need to call free() on the pointer after you're done using it.</p>
<p>Returns NULL on failure.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object for which to retrieve the client information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to client info string (must be free()'d) or NULL. </dd></dl>

</div>
</div>
<a class="anchor" id="a8f2a936527480c92d24ee8ffc1a03058"></a><!-- doxytag: member="cmdserv_connection.h::cmdserv_connection_read" ref="a8f2a936527480c92d24ee8ffc1a03058" args="(cmdserv_connection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cmdserv__connection_8h.html#a8f2a936527480c92d24ee8ffc1a03058">cmdserv_connection_read</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cmdserv__connection_8h.html#a78d98a9d57be748fd1a5318726cc623b">cmdserv_connection</a> *&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Trigger a read on the connection. </p>
<p>A call to this method will read available data from the client connection into the internal buffer and parse (and execute through the callback) a command if possible (i.e. if a completed command becomes available throughout this read operation).</p>
<p>Normal users of the library should never have to call this method: The main cmdserv server object takes care of this. The method is exposed to be used by cmdserv, for testing, and for users with special needs who want to use the connection object from a different server.</p>
<p>Note that a connection might be closed (and the cmdserv_connection object free()'d!) while in this method. You should be notified of that through the close_handler() callback. Make sure this ensures that your code will really get rid of all references to the connection object and will not call anything on it in that case.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="cmdserv_8h.html#a625b4ff24ecb2d376bdc1e3dd4abe558" title="The main object representing one server instance.">cmdserv</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The cmdserv connection object to read from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="cmdserv__connection_8h.html">cmdserv_connection.h</a>      </li>

    <li class="footer">Generated on Thu May 24 2018 18:16:04 for cmdserv by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
